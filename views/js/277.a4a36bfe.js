"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[277],{4277:function(s,e,t){t.r(e),t.d(e,{default:function(){return l}});var o=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"login"},[t("div",{staticClass:"Ellipse"}),t("div",{staticClass:"Ellipse2"}),t("span",{staticClass:"back"},[t("router-link",{attrs:{to:"welcome"}},[s._v("<<返回")])],1),s._m(0),t("div",{staticClass:"phone"},[t("van-icon",{staticClass:"icon",attrs:{name:"manager",color:"#700BEF",size:"30"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.phone_id,expression:"phone_id"}],class:{outline:0==s.check.checkPhone()},attrs:{type:"text",placeholder:"手机号"},domProps:{value:s.phone_id},on:{input:function(e){e.target.composing||(s.phone_id=e.target.value)}}})],1),t("div",{staticClass:"password"},[t("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"},on:{click:s.showpassword}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],ref:"password",class:{outline:0==s.check.checkPassword()},attrs:{type:"password",name:"",placeholder:"密码"},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value)}}})],1),s.loginshow?t("span",{staticClass:"button",on:{click:s.login}},[t("a",[s._v("登录")])]):t("span",{staticClass:"button",style:{opacity:.5}},[t("a",[s._v("登录")])])])},a=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"logintitle"},[t("p",[s._v("Login")])])}],i=t(3444),r=t(4665),n={data(){return{phone_id:"",password:""}},computed:{loginshow(){return!(!this.check.checkPhone()||!this.check.checkPassword())},check(){return new i.Z({phone:this.phone_id,password:this.password})},...(0,r.rn)("user",["token"])},methods:{async login(){try{await this.$store.dispatch("user/userLogin",{phone_id:this.phone_id,password:this.password}),this.$dialog.alert({message:"登录成功"}).then((()=>{this.$router.push({name:"home"})}))}catch(s){this.$dialog.alert({message:s.message}).then((()=>{this.password=""}))}},showpassword(s){"text"==this.$refs.password.type?this.$refs.password.type="password":this.$refs.password.type="text"}}},c=n,h=t(1001),d=(0,h.Z)(c,o,a,!1,null,"0d8e8be6",null),l=d.exports},3444:function(s,e,t){function o(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}t.d(e,{Z:function(){return a}});class a{constructor({phone:s,code:e,password:t,repassword:a}){o(this,"checkPhone",(function(){if(!this.phone)return 0;let s=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|16[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|19[0|1|2|3|4|5|6|7|8|9])\d{8}$/;return!!s.test(this.phone)})),o(this,"checkCode",(function(s){return this.code?this.code==s:0})),o(this,"checkPassword",(function(){if(!this.password)return 0;const s=/^[a-zA-Z]\S{6,12}$/;return!!s.test(this.password)})),o(this,"checkRePassword",(function(){return this.checkPassword()?this.password==this.repassword:0})),this.phone=s,this.code=e,this.password=t,this.repassword=a}checkAll(s){let e=[this.checkCode(s),this.checkRePassword(),this.checkPassword(),this.checkPhone()];return e=e.filter((s=>0!=s)),e.every((s=>1==s))}}}}]);