"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[901],{32901:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"maindata"},[n("Backtop"),n("div",{staticClass:"head"},[e._m(0),n("div",{staticClass:"headRight"},[n("van-image",{attrs:{round:"",width:"60px",height:"60px",src:e.userInfo.avatarurl}}),n("UpLoaderOne",{on:{getfile:e.getphoto}})],1)]),n("div",{staticClass:"input"},[n("van-cell-group",[n("van-field",{attrs:{label:"昵称",placeholder:e.userInfo.nickname},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),n("van-cell-group",[n("van-field",{attrs:{readonly:"",clickable:"",name:"datetimePicker",value:e.gender,label:"性别",placeholder:e.userInfo.gender},on:{click:function(t){e.showPicker=!0}}}),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirmSex,cancel:function(t){e.showPicker=!1}}})],1)],1),n("van-cell-group",[n("van-field",{attrs:{readonly:"",clickable:"",name:"datetimePicker",value:e.birthday,label:"时间选择",placeholder:e.userInfo.birthday},on:{click:function(t){e.showDate=!0}}}),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showDate,callback:function(t){e.showDate=t},expression:"showDate"}},[n("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.onConfirmDate,cancel:function(t){e.showDate=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1),n("SelectSite",{attrs:{address:e.userInfo.address},on:{updateAddress:e.getaddress}})],1),n("div",{staticClass:"footer"},[n("van-button",{staticClass:"btn",attrs:{round:"",type:"info"},on:{click:e.clearinfo}},[e._v("取消")]),n("van-button",{staticClass:"btn",attrs:{round:"",type:"info"},on:{click:e.saveData}},[e._v("保存")])],1)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"headLeft"},[n("b",[e._v("头像")])])}],o=n(4367),s=(n(18508),n(58256)),c=n(16198),i=(n(92222),n(78975),n(34665)),u={name:"MainData",mounted:function(){this.getUserInfo()},data:function(){return{showDate:!1,minDate:new Date(1900,0,1),maxDate:new Date,currentDate:new Date(2001,0,1),tipsMsg:"保存成功",avatar:[],columns:["男","女"],showPicker:!1,birthday:null,nickname:null,address:null,gender:null}},methods:{getUserInfo:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("user/getUserInfo");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),(0,s.Z)("获取用户信息失败");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},saveData:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={nickname:e.nickname,address:e.address,gender:e.gender,birthday:e.birthday},t.prev=1,t.next=4,e.$store.dispatch("user/updateInfo",n);case 4:return a=t.sent,t.next=7,(0,s.Z)(a);case 7:location.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),(0,s.Z)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},getaddress:function(e){this.address=e},onClickLeft:function(){(0,s.Z)("返回")},formatDate:function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},onConfirmDate:function(e){this.showDate=!1,this.birthday=this.formatDate(e)},getphoto:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=new FormData,console.log(e),a.append("avatarurl",e[0].file),n.prev=3,n.next=6,t.$store.dispatch("user/updateUserAvatar",a);case 6:return r=n.sent,n.next=9,(0,s.Z)(r);case 9:location.reload(),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](3),(0,s.Z)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},clearinfo:function(){},onConfirmSex:function(e){this.gender=e,this.showPicker=!1}},computed:(0,o.Z)({},(0,i.rn)("user",["userInfo"]))},l=u,d=n(43736),f=(0,d.Z)(l,a,r,!1,null,"9afa120a",null),h=f.exports}}]);