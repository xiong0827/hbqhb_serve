"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[319],{1319:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"Ellipse"}),s("div",{staticClass:"Ellipse2"}),s("span",{staticClass:"back"},[s("router-link",{attrs:{to:"welcome"}},[e._v("<<返回")])],1),s("span",{staticClass:"tiaoguo"},[s("router-link",{attrs:{to:"/register"}},[e._v("注册>>")])],1),e._m(0),s("div",{staticClass:"phone"},[s("van-icon",{staticClass:"icon",attrs:{name:"manager",color:"#700BEF",size:"30"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone_id,expression:"phone_id"}],class:{outline:0==e.check.checkPhone()},attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.phone_id},on:{input:function(t){t.target.composing||(e.phone_id=t.target.value)}}})],1),s("div",{staticClass:"password"},[s("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"},on:{click:e.showpassword}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"password",class:{outline:0==e.check.checkPassword()},attrs:{type:"password",name:"",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})],1),e.loginshow?s("span",{staticClass:"button",on:{click:e.login}},[s("a",[e._v("登录")])]):s("span",{staticClass:"button",style:{opacity:.5}},[s("a",[e._v("登录")])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"logintitle"},[s("p",[e._v("登录账号")])])}],o=s(16198),a=s(4367),i=(s(78975),s(22121)),c=s(34665),u={data:function(){return{phone_id:"",password:""}},computed:(0,a.Z)({loginshow:function(){return!(!this.check.checkPhone()||!this.check.checkPassword())},check:function(){return new i.Z({phone:this.phone_id,password:this.password})}},(0,c.rn)("user",["token"])),methods:{login:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("user/userLogin",{phone_id:e.phone_id,password:e.password});case 3:e.$dialog.alert({message:"登录成功"}).then((function(){e.$router.push({name:"home"})})),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$dialog.alert({message:t.t0.message}).then((function(){e.password=""}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showpassword:function(e){"text"==this.$refs.password.type?this.$refs.password.type="password":this.$refs.password.type="text"}}},h=u,p=s(1001),l=(0,p.Z)(h,n,r,!1,null,"4e0e8cfa",null),d=l.exports},22121:function(e,t,s){s.d(t,{Z:function(){return i}});s(21703);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=s(23796),i=(s(74916),s(77601),s(57327),s(41539),function(){function e(t){var s=t.phone,r=t.code,o=t.password,i=t.repassword;n(this,e),(0,a.Z)(this,"checkPhone",(function(){if(!this.phone)return 0;var e=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|16[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|19[0|1|2|3|4|5|6|7|8|9])\d{8}$/;return!!e.test(this.phone)})),(0,a.Z)(this,"checkCode",(function(e){return this.code?this.code==e:0})),(0,a.Z)(this,"checkPassword",(function(){if(!this.password)return 0;var e=/^[a-zA-Z]\S{6,12}$/;return!!e.test(this.password)})),(0,a.Z)(this,"checkRePassword",(function(){return this.checkPassword()?this.password==this.repassword:0})),this.phone=s,this.code=r,this.password=o,this.repassword=i}return o(e,[{key:"checkAll",value:function(e){var t=[this.checkCode(e),this.checkRePassword(),this.checkPassword(),this.checkPhone()];return t=t.filter((function(e){return 0!=e})),t.every((function(e){return 1==e}))}}]),e}())}}]);