"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[56],{4056:function(s,e,t){t.r(e),t.d(e,{default:function(){return p}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"resetPassword"},[t("div",{staticClass:"top"},[t("router-link",{staticClass:"topspan1",attrs:{to:"/main"}},[s._v("<<返回")])],1),t("div",{staticClass:"center"},[t("h1",[s._v("ResetRegister")]),s._m(0),t("div",{staticClass:"password old"},[t("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"},on:{click:function(e){return s.showpassword("1")}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.oldpassword,expression:"oldpassword"}],ref:"password1",attrs:{type:"password",name:"",placeholder:"原密码"},domProps:{value:s.oldpassword},on:{input:function(e){e.target.composing||(s.oldpassword=e.target.value)}}})],1),t("div",{staticClass:"password new"},[t("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"},on:{click:function(e){return s.showpassword("2")}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.newpassword,expression:"newpassword"}],ref:"password2",class:{outline:1!=s.check.checkPassword()},attrs:{type:"password",name:"",placeholder:"新密码"},domProps:{value:s.newpassword},on:{input:function(e){e.target.composing||(s.newpassword=e.target.value)}}})],1),t("div",{staticClass:"password repeat"},[t("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"},on:{click:function(e){return s.showpassword("3")}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.repassword,expression:"repassword"}],ref:"password3",class:{outline:0==s.check.checkRePassword()},attrs:{type:"password",name:"",placeholder:"再次输入密码"},domProps:{value:s.repassword},on:{input:function(e){e.target.composing||(s.repassword=e.target.value)}}})],1)]),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button1",attrs:{round:"",type:"info"},on:{click:s.updatepassword}},[s._v("重置密码")])],1)])},a=[function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",{staticClass:"registersvg"},[r("img",{attrs:{src:t(4518),alt:""}})])}],o=t(3444),i={name:"ResetPassword",data(){return{oldpassword:"",newpassword:"",repassword:"",code:"",timer:0,tipsMsg:"修改成功"}},methods:{showpassword(s){switch(s){case"1":"text"==this.$refs.password1.type?this.$refs.password1.type="password":this.$refs.password1.type="text";break;case"2":"text"==this.$refs.password2.type?this.$refs.password2.type="password":this.$refs.password2.type="text";break;case"3":"text"==this.$refs.password3.type?this.$refs.password3.type="password":this.$refs.password3.type="text";break;default:return}},getcode(){this.phonenum,this.timer=5;var s=setInterval((()=>{this.timer--,0==this.timer&&clearInterval(s)}),1e3)},async updatepassword(){this.newpassword!==this.repassword&&this.$dialog.alert({message:"请输入一样的密码"});try{let s=await this.$store.dispatch("user/upDatePassword",{oldpassword:this.oldpassword,password:this.newpassword});this.$dialog.alert({message:s+"请重新登录"}).then((()=>{localStorage.removeItem("token"),this.$router.replace("main"),location.reload()}))}catch(s){this.$dialog.alert({message:s}).then((()=>{this.newpassword="",this.oldpassword="",this.repassword=""}))}}},computed:{check(){return new o.Z({password:this.newpassword,repassword:this.repassword})},isshow(){return this.check.checkAll()}}},n=i,c=t(3736),d=(0,c.Z)(n,r,a,!1,null,"132cd47d",null),p=d.exports},3444:function(s,e,t){function r(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}t.d(e,{Z:function(){return a}});class a{constructor({phone:s,code:e,password:t,repassword:a}){r(this,"checkPhone",(function(){if(!this.phone)return 0;let s=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|16[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|19[0|1|2|3|4|5|6|7|8|9])\d{8}$/;return!!s.test(this.phone)})),r(this,"checkCode",(function(s){return this.code?this.code==s:0})),r(this,"checkPassword",(function(){if(!this.password)return 0;const s=/^[a-zA-Z]\S{6,12}$/;return!!s.test(this.password)})),r(this,"checkRePassword",(function(){return this.checkPassword()?this.password==this.repassword:0})),this.phone=s,this.code=e,this.password=t,this.repassword=a}checkAll(s){let e=[this.checkCode(s),this.checkRePassword(),this.checkPassword(),this.checkPhone()],t=e.every((s=>!0===s));return t}}},4518:function(s,e,t){s.exports=t.p+"img/svg2.7fddacc4.svg"}}]);