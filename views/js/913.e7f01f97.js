"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[913],{8913:function(s,t,o){o.r(t),o.d(t,{default:function(){return c}});var e=function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"goodsinfo"},[o("Backtop"),s.goodsinfo&&s.issueper?o("div",{staticClass:"top"},[o("div",{staticClass:"top1"},[o("div",{staticClass:"ava"},[o("img",{attrs:{src:s.issueper.avatarurl,alt:""},on:{click:function(t){return s.$router.push({name:"personal",query:{phone_id:s.issueper.phone_id}})}}}),o("b",[s._v(s._s(s.issueper.nickname))])]),o("div",{staticClass:"follow"},[o("van-button",{staticClass:"btn",attrs:{round:"",type:"info"}},[s._v("+关注")])],1)]),o("div",{staticClass:"center"},[o("div",{staticClass:"price"},[o("b",[s._v("￥"+s._s(s.goodsinfo.gprice))])]),o("div",{staticClass:"goodsname"},[s._v(s._s(s.goodsinfo.title))]),o("div",{staticClass:"goodsinfo1"},[s._v(" "+s._s(s.goodsinfo.details)+" ")]),o("div",{staticClass:"goodssvg"},s._l(s.goodsphoto,(function(s,t){return o("img",{key:t,attrs:{src:s,alt:""}})})),0)])]):s._e(),s.goodsIsShow&&s.seeUserInfo?o("div",{staticClass:"collect"},[o("h4",[s._v("留言")]),o("div",{staticClass:"collectbox1"},[o("img",{attrs:{src:s.seeUserInfo.avatarurl,alt:""}}),o("input",{directives:[{name:"model",rawName:"v-model",value:s.replytitle,expression:"replytitle"}],attrs:{type:"text",placeholder:"请留言，询问更多细节"},domProps:{value:s.replytitle},on:{input:function(t){t.target.composing||(s.replytitle=t.target.value)}}})]),s._l(s.replayInfo,(function(t){return o("div",{directives:[{name:"show",rawName:"v-show",value:s.goodsinfo.greply,expression:"goodsinfo.greply"}],key:t.reply_id,staticClass:"collectbox2"},[o("img",{attrs:{src:t.avatarurl,alt:""}}),o("h5",[s._v(s._s(t.nickname))]),o("b",[s._v(s._s(t.replytitle))])])})),s._m(0)],2):s._e(),s.seeUserInfo?o("div",{staticClass:"bottom"},[o("div",{staticClass:"mind",on:{click:s.addlike}},[o("van-icon",{attrs:{name:"like",color:"red",size:"40px"}}),o("b",[s._v(s._s(s.goodsinfo.likes))])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:-1==s.goodsinfo.wantshow,expression:"goodsinfo.wantshow == -1"}],staticClass:"bit",on:{click:s.addwantlist}},[o("van-icon",{attrs:{name:"star-o",size:"40px"}}),o("b",[s._v(s._s(s.goodsinfo.wantlist?s.goodsinfo.wantlist.length:0))])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:-1!=s.goodsinfo.wantshow,expression:"goodsinfo.wantshow != -1"}],staticClass:"bit"},[o("van-icon",{attrs:{name:"star",color:"red",size:"40"},on:{click:s.addwantlist}}),o("b",[s._v(s._s(s.goodsinfo.wantlist?s.goodsinfo.wantlist.length:0))])],1),o("div",{staticClass:"buy"},[o("van-button",{staticClass:"btn",attrs:{round:"",type:"info",size:"50"},on:{click:s.addreply}},[s._v("留言")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:0!=s.goodsinfo.isbuy,expression:"goodsinfo.isbuy != 0"}],staticClass:"btn",attrs:{round:"",type:"info",size:"50"},on:{click:s.gosubmit}},[s._v("购买")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:0==s.goodsinfo.isbuy,expression:"goodsinfo.isbuy == 0"}],staticClass:"btn",attrs:{round:"",type:"info",size:"50"}},[s._v("编辑信息")])],1)]):s._e(),s.goodsIsShow?s._e():o("van-empty",{attrs:{image:"error",description:"商品不见了"}})],1)},i=[function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"collectbox4"},[o("a",{attrs:{href:"#"}},[s._v("查看全部留言>>")])])}],a=o(4665),n={name:"GoodsInfo",data(){return{goodsIsShow:!0,replytitle:""}},mounted(){try{this.getgoodsinfo(),setTimeout((()=>{this.getisseinfo(this.goodsinfo.phone_id)}),200)}catch(s){}},computed:{...(0,a.rn)("goods",["goodsinfo"]),...(0,a.rn)("user",{issueper:"issueper"}),goodsphoto(){return this.goodsinfo.goodsphoto||[]},seeUserInfo(){return this.goodsinfo.seeuserinfo||{}},replayInfo(){return this.goodsinfo.greply||[]}},methods:{async getgoodsinfo(){try{await this.$store.dispatch("goods/getGoodsInfo",this.$route.query.goods_id)}catch(s){this.goodsIsShow=!1}},async addlike(){try{await this.$store.dispatch("goods/getUserLike",this.goodsinfo.goods_id),this.getgoodsinfo()}catch(s){this.$dialog.alert({message:s}).then((()=>{}))}},async addwantlist(){try{await this.$store.dispatch("goods/addWantList",this.goodsinfo.goods_id),this.getgoodsinfo()}catch(s){this.$dialog.alert({message:s}).then((()=>{}))}},async addreply(){try{this.replytitle.trim().length>0?(await this.$store.dispatch("goods/addReply",{goods_id:this.goodsinfo.goods_id,replytitle:this.replytitle}),this.getgoodsinfo()):this.$dialog.alert({message:"不允许回复空"}).then((()=>{this.replytitle=""}))}catch(s){this.$dialog.alert({message:s}).then((()=>{this.replytitle=""}))}},async getisseinfo(){await this.$store.dispatch("user/getIsserUserInfo",this.goodsinfo.phone_id)},async getseeuserinfo(){await this.$store.dispatch("user/getUserInfo")},gosubmit(){this.$router.push({name:"ordergoods",query:{goods_id:this.goodsinfo.goods_id}})}}},r=n,d=o(1001),l=(0,d.Z)(r,e,i,!1,null,"6e4eb76e",null),c=l.exports}}]);