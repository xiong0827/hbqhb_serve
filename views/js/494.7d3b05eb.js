"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[494],{3494:function(s,t,o){o.r(t),o.d(t,{default:function(){return c}});var e=function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"classifycontainer"},[o("Searchinput",{attrs:{placeholdervalue:"搜索更多关键词",toppx:"40"}}),s.classList?o("div",{staticClass:"classifylist"},s._l(s.classList,(function(t){return o("li",{key:t.classname,class:{active:s.gclassone==t.classname},on:{click:function(o){return s.getclassgoods(t.classname)}}},[o("a",{attrs:{href:""}},[o("img",{attrs:{src:t.classurl,alt:""}}),o("p",[s._v(s._s(t.classname))])])])})),0):s._e(),o("van-list",{directives:[{name:"show",rawName:"v-show",value:s.goodsCount,expression:"goodsCount"}],staticClass:"classinfo",attrs:{finished:s.finished,"finished-text":"没有更多了",offset:"300",error:s.error,"error-text":"请求失败，点击重新加载"},on:{load:s.onLoad,"update:error":function(t){s.error=t}},model:{value:s.loading,callback:function(t){s.loading=t},expression:"loading"}},s._l(s.list,(function(t,e){return o("li",{directives:[{name:"show",rawName:"v-show",value:t._id,expression:"goods._id"}],key:e,on:{click:function(o){return s.$router.push({name:"goodsinfo",query:{goods_id:t.goods_id}})}}},[t.goodsphoto[0]?o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.goodsphoto[0],expression:"goods.goodsphoto[0]"}],attrs:{alt:""}}):s._e(),o("a",{attrs:{href:""}},[s._v(s._s(t.title))]),o("i",[s._v(s._s(t.gprice))])])})),0)],1)},i=[],a=o(4665),n={data(){return{searchcode:"",gclassone:this.$route.query.classname,pagenum:4,atpage:1,isLoading:!1,loading:!1,finished:!1,error:!1,list:[],total:0}},mounted(){this.$store.dispatch("goods/getClass"),this.getList()},beforeUpdate(){},methods:{getclassgoods(s){this.$router.replace({name:"classify",query:{classname:s}})},async getGoodsList(){await this.$store.dispatch("goods/getGoodsList",{pagenum:this.pagenum,atpage:this.atpage,gclassone:this.gclassone})},async getList(){await this.getGoodsList(),this.total=this.goodsCount,0==this.goodsCount&&(this.list=[],this.finished=!0),this.total=this.goodsInfoList.length;for(const s in this.goodsInfoList)this.list.push(this.goodsInfoList[s]);this.loading=!1,this.list.length>=this.goodsCount&&(this.finished=!0)},onLoad(){this.getList(),this.atpage++},onRefresh(){this.finished=!1,this.loading=!0,this.atpage=1,this.list=[],this.onLoad()}},computed:{...(0,a.rn)("goods",["goodsInfoList","goodsCount","classList"])}},l=n,r=o(3736),d=(0,r.Z)(l,e,i,!1,null,"7a92e046",null),c=d.exports}}]);