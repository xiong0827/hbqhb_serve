"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[118],{11118:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"releaseGoods"},[n("div",{staticClass:"top"},[n("div",{staticClass:"topLeft",on:{click:function(e){return t.$router.go(-1)}}},[n("router-link",{attrs:{to:""}},[t._v("取消")])],1),n("div",{staticClass:"topRight"},[n("van-button",{staticClass:"topButton btn1",attrs:{round:"",type:"info"}},[t._v("存草稿")]),n("van-button",{staticClass:"topButton btn",attrs:{round:"",type:"info"},on:{click:t.issuegoods}},[t._v("发布")])],1)]),n("div",{staticClass:"title"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{placeholder:"写标题，能吸引更多人"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"center"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details,expression:"details"}],attrs:{placeholder:" 卖家都关心品牌型号、入手渠道、转手原因...."},domProps:{value:t.details},on:{input:function(e){e.target.composing||(t.details=e.target.value)}}}),n("UpLoader",{attrs:{maxnum:"5"},on:{getfile:t.getphoto}})],1),n("div",{staticClass:"footer"},[n("van-field",{staticStyle:{width:"80%"},attrs:{id:"classxuanze",readonly:"",clickable:"",name:"picker",value:t.gclassone,label:"选择分类",placeholder:"点击选择分类"},on:{click:function(e){t.showPicker=!0}}}),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:function(e){t.showPicker=!1}}})],1),n("div",{staticClass:"price"},[n("div",{staticClass:"priceLeft"},[n("van-icon",{attrs:{name:"balance-o",size:"40"}}),n("b",[t._v("价格")])],1),n("div",{staticClass:"priceRight"},[n("van-field",{attrs:{type:"number",name:"pattern",placeholder:"价格为低于入手价更容易卖出",rules:[{pattern:t.pattern,message:"请输入正确内容"}]},model:{value:t.gprice,callback:function(e){t.gprice=t._n(e)},expression:"gprice"}})],1)])],1)])},o=[],s=(n(69814),n(61404)),i=n(16198),r=(n(78975),n(41539),n(54747),n(73210),{name:"ReleaseGoods",data:function(){return{gclassone:"",gprice:0,pattern:/^\d{1,5}$/,title:"",details:"",gphoto:[],columns:["手机数码","女装","男装","运动户外","生活百货","游戏装备","技能服务","学习资料","卡卷交易","服饰配件"],showPicker:!1}},mounted:function(){},methods:{onConfirm:function(t){this.gclassone=t,this.showPicker=!1},getphoto:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.gphoto=[],t.forEach((function(t){e.gphoto.push(t)}));case 2:case"end":return n.stop()}}),n)})))()},issuegoods:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.getphoto.length>0&&t.title&&t.details&&t.gprice&&t.gclassone)){e.next=14;break}return n=new FormData,n.append("details",t.details.trim()),n.append("title",t.title.trim()),n.append("gclassone",t.gclassone),n.append("gprice",t.gprice),t.gphoto.forEach((function(t){n.append("photo",t.file)})),e.next=9,t.$api.reqIssuegoods(n);case 9:a=e.sent,console.log(a.status),200==a.status?s.Z.confirm({title:"成功提示",message:"发布新商品成功",confirmButtonText:"查看详情",cancelButtonText:"继续查看"}).then((function(){t.$router.push({name:"goodsinfo",query:{goods_id:a.goods_id}})})).catch((function(){t.gprice=0,t.gclassone=""})):t.$dialog.alert({message:a.message+"发布商品失败"}).then((function(){})),e.next=15;break;case 14:t.$dialog.alert({message:"请填写完整数据"}).then((function(){}));case 15:case"end":return e.stop()}}),e)})))()}}}),c=r,l=n(1001),u=(0,l.Z)(c,a,o,!1,null,"1d289a69",null),p=u.exports}}]);