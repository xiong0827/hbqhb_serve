"use strict";(self["webpackChunkwxcli"]=self["webpackChunkwxcli"]||[]).push([[792],{90792:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register"},[s("div",{staticClass:"top"},[s("router-link",{staticClass:"topspan1",attrs:{to:"/welcome"}},[e._v(" <<返回 ")]),s("router-link",{staticClass:"topspan2",attrs:{to:"/login"}},[e._v("登录>>")])],1),s("div",{staticClass:"center"},[s("h1",[e._v("注册账号")]),e._m(0),s("div",{staticClass:"phone"},[s("van-icon",{staticClass:"icon",attrs:{name:"manager",color:"#700BEF",size:"30"}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.phone_id,expression:"phone_id",modifiers:{number:!0}}],class:{outline:0==e.check.checkPhone()},attrs:{type:"tel",placeholder:"手机号"},domProps:{value:e.phone_id},on:{input:function(t){t.target.composing||(e.phone_id=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})],1),s("div",{staticClass:"code"},[s("van-icon",{staticClass:"icon",attrs:{name:"comment",color:"#700BEF",size:"30"}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.code,expression:"code",modifiers:{number:!0}}],class:{outline:e.code.length<6},attrs:{type:"number",name:"",placeholder:"验证码",max:"6"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),0==e.timer&&e.check.checkPhone()?s("van-button",{staticClass:"getcode",attrs:{type:"info",size:"30",round:""},on:{click:e.getcode}},[e._v("获取验证码 ")]):0!=e.timer||e.check.checkPhone()?s("van-button",{staticClass:"getcode",attrs:{disabled:"",round:""}},[e._v(e._s(e.timer)+"秒后重发")]):s("van-button",{staticClass:"getcode",attrs:{type:"info",disabled:"",round:""},on:{click:e.getcode}},[e._v(" 获取验证码")])],1),s("div",{staticClass:"password"},[s("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:{outline:0==e.check.checkPassword()},attrs:{type:"password",name:"",placeholder:"密码 六位以上的字母数字"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})],1),s("div",{staticClass:"password"},[s("van-icon",{staticClass:"icon",attrs:{name:"lock",color:"#700BEF",size:"30"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.repassword,expression:"repassword"}],class:{outline:0==e.check.checkRePassword()},attrs:{type:"password",name:"",placeholder:"再次输入密码"},domProps:{value:e.repassword},on:{input:function(t){t.target.composing||(e.repassword=t.target.value)}}})],1),s("div",{staticClass:"bottom"},[s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.registerShow,expression:"registerShow"}],staticClass:"button1",attrs:{round:"",type:"info"},on:{click:e.userRegister}},[e._v("注册")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.registerShow,expression:"!registerShow"}],staticClass:"button1",attrs:{round:"",disabled:"",color:"#6f0bef"},on:{click:e.userRegister}},[e._v("注册 ")])],1)])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"registersvg"},[r("img",{attrs:{src:s(50558),alt:""}})])}],o=s(4367),a=s(16198),c=(s(78975),s(22121)),i=s(34665),d={name:"Register",data:function(){return{phone_id:"",code:"",password:"",repassword:"",timer:0,tipsMsg:""}},methods:{getcode:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("user/getCode",{phone_id:e.phone_id});case 3:e.timer=60,s=setInterval((function(){e.timer--,0==e.timer&&clearInterval(s)}),1e3),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$dialog.alert({message:t.t0}).then((function(){e.tipsMsg=""}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},userRegister:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.check.checkCode(e.phonecode)){t.next=14;break}return t.prev=1,s=e.phone_id,r=e.password,t.next=5,e.$store.dispatch("user/Register",{phone_id:s,password:r});case 5:n=t.sent,e.$dialog.alert({message:n}).then((function(){e.$store.commit("user/GETCODE",""),e.$router.push({name:"login"})})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$dialog.alert({message:t.t0}).then((function(){e.tipsMsg="",e.code=""}));case 12:t.next=15;break;case 14:e.check.checkCode(e.phonecode)?e.$dialog.alert({message:"请先获取验证码"}).then((function(){e.code=""})):e.$dialog.alert({message:"验证码错误"}).then((function(){e.code=""}));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},computed:(0,o.Z)({check:function(){return new c.Z({phone:this.phone_id,code:this.code,password:this.password,repassword:this.repassword})},registerShow:function(){return!!(""!=this.code&&this.check.checkPhone()&&this.check.checkPassword()&&this.check.checkRePassword())}},(0,i.rn)("user",["phonecode"]))},u=d,l=s(1001),h=(0,l.Z)(u,r,n,!1,null,"10c4160a",null),p=h.exports},22121:function(e,t,s){s.d(t,{Z:function(){return c}});s(21703);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=s(23796),c=(s(74916),s(77601),s(57327),s(41539),function(){function e(t){var s=t.phone,n=t.code,o=t.password,c=t.repassword;r(this,e),(0,a.Z)(this,"checkPhone",(function(){if(!this.phone)return 0;var e=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|16[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9]|19[0|1|2|3|4|5|6|7|8|9])\d{8}$/;return!!e.test(this.phone)})),(0,a.Z)(this,"checkCode",(function(e){return this.code?this.code==e:0})),(0,a.Z)(this,"checkPassword",(function(){if(!this.password)return 0;var e=/^[a-zA-Z]\S{6,12}$/;return!!e.test(this.password)})),(0,a.Z)(this,"checkRePassword",(function(){return this.checkPassword()?this.password==this.repassword:0})),this.phone=s,this.code=n,this.password=o,this.repassword=c}return o(e,[{key:"checkAll",value:function(e){var t=[this.checkCode(e),this.checkRePassword(),this.checkPassword(),this.checkPhone()];return t=t.filter((function(e){return 0!=e})),t.every((function(e){return 1==e}))}}]),e}())},50558:function(e,t,s){e.exports=s.p+"img/svg2.7fddacc4.svg"}}]);